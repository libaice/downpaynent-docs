1. 通过x2y2 接口，传入TokenAddress 和tokenId, 查询到一个 Seller Order的详情

   ```
   https://api.x2y2.org/v1/orders?contract=0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d&sort=created_at&direction=desc&token_id=7151
   ```

   

   比如当前 BAYC 的7151 在x2y2上挂出了卖单

   ```json
   {
       "data": [
           {
               "amount": 1,
               "created_at": 1660117235,
               "currency": "0x0000000000000000000000000000000000000000",
               "end_at": 1660217758,
               "erc_type": 0,
               "id": 7991604,
               "is_bundle": false,
               "is_collection_offer": false,
               "item_hash": "0x8ddff94fa242c412d2e9994c6fe20ec7a5ad02c4f40e912e84466c73b86ec115",
               "maker": "0x611c67ec71202613da55d00ddc04ccdb02060fcc",
               "price": "82489000000000000000",
               "side": 1,
               "status": "open",
               "taker": null,
               "token": {
                   "contract": "0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d",
                   "erc_type": "erc721",
                   "token_id": "7151"
               },
               "type": "sell",
               "updated_at": 1660117235
           }
       ],
       "next": null,
       "success": true
   }
   ```

   







2. 购买参数， 传入

   ```
    function run(Market.RunInput memory input) public payable ()
   ```

   参数构造

```solidity

struct RunInput {
    Order[] orders;
    SettleDetail[] details;
    SettleShared shared;
    // signature
    bytes32 r;
    bytes32 s;
    uint8 v;
}



struct Order {
        uint256 salt;
        address user;
        uint256 network;
        uint256 intent;
        uint256 delegateType;
        uint256 deadline;
        address currency;
        bytes dataMask;
        OrderItem[] items;
        // signature
        bytes32 r;
        bytes32 s;
        uint8 v;
        uint8 signVersion;
}



  struct SettleDetail {
        Op op;
        uint256 orderIdx;
        uint256 itemIdx;
        uint256 price;
        bytes32 itemHash;
        address executionDelegate;
        bytes dataReplacement;
        uint256 bidIncentivePct;
        uint256 aucMinIncrementPct;
        uint256 aucIncDurationSecs;
        Fee[] fees;
    }

  struct SettleShared {
        uint256 salt;
        uint256 deadline;
        uint256 amountToEth;
        uint256 amountToWeth;
        address user;
        bool canFail;
    }





```



---





x2y2的查询一个具体订单的参数

x2y2 接口文档

https://hackmd.io/7AnOgEqFT2mZHqUQ4bXwsw#POST-apiorderssign



POST 请求，查询一个订单的Input 传入的数据。



https://api.x2y2.org/api/orders/sign



```
{
    "caller": "0xA0b790C492b4857aF1e3Ab1e384f03eD973D5268",
    "op": 1,
    "amountToEth": "0",
    "amountToWeth": "0",
    "items": [
        {
            "orderId": 8696870,
            "currency": "0x0000000000000000000000000000000000000000",
            "price": "75980000000000000000"
        }
    ]
}
```



caller  购买者的用户地址

op amountToEth	amountToWeth 为固定值 1 0 0



items ， 传入上面接口中返回出来的 orderId, currency, price 字段 。 拿到返回的InputData 数据， 既是需要购买的时候，向run()方法中，传递的数据。



```json
{
    "data": [
        {
            "input": "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000480000000000000000000000000000000000000000000000000000131811c5632ff0000000000000000000000000000000000000000000000000000000062fa205200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0b790c492b4857af1e3ab1e384f03ed973d526800000000000000000000000000000000000000000000000000000000000000004adc958256531a9de0d7ecfaf995acf80f833bc1e819e5af3addd30797628ab2003357f3727fcf70a9ca3025ba3d10d8a7ff3e2a25dd948ddf76fadd724759cd000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000005ea7d3d98571d2a5722ba93fe53089ab000000000000000000000000cee749f1cfc66cd3fb57cefde8a9c5999fbe7b8f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000062fd925c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001c06b9bc049c00da1de15ad5001025976b5aa3537aad2da1af73bd6cba3c06663236167dcd1ab4af8b6be30ac62420edfe67fa9ce50fc721312c3de87804e5c46e2000000000000000000000000000000000000000000000000000000000000001b00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000041e6f2f70d22e00000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000bc4ca0eda7647a8ab7c2061c2e118a18a936f13d0000000000000000000000000000000000000000000000000000000000000a72000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041e6f2f70d22e0000dbc9bbb87fee2955628b64d660138d12f7a0bab7f3875668ee585ee192768952000000000000000000000000f849de01b080adc3a814fabe1e2087475cf2e35400000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000001388000000000000000000000000d823c605807cc5e6bd6fc0d7e4eea50d3e2d66cd00000000000000000000000000000000000000000000000000000000000061a8000000000000000000000000a858ddc0445d8131dac4d1de01f834ffcba52ef1",
            "order_id": 8696870
        }
    ],
    "next": null,
    "success": true
}
```



















